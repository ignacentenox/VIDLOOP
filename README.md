# VIDLOOP DEFINITIVO - Sistema de Videoloops para Raspberry Pi

Soluci√≥n profesional **TODO-EN-UNO** para reproducci√≥n autom√°tica y continua de videos en pantallas, con **tecnolog√≠a anti-micro-cortes** y configuraci√≥n ultra-optimizada. Ideal para puntos de venta, exhibiciones, ferias, se√±alizaci√≥n digital y aplicaciones de broadcast profesional.

Desarrollado por **Ignacio Manuel Centeno** (Desarrollador de Software), con el aval de **44 Contenidos**.

---

## üéØ ¬øQu√© es VIDLOOP DEFINITIVO?

**VIDLOOP DEFINITIVO** es la evoluci√≥n completa del sistema de videoloops, que integra en un **√∫nico script instalador** todas las funcionalidades, optimizaciones y correcciones desarrolladas:

- ‚úÖ **Instalaci√≥n completa autom√°tica** (Sistema + Software + Configuraci√≥n)
- ‚úÖ **Tecnolog√≠a anti-micro-cortes** (Buffers 20x, GPU optimizada, CPU overclocking)
- ‚úÖ **Force Display HDMI ultra-agresivo** (Soluci√≥n definitiva a pantallas negras)
- ‚úÖ **Configuraci√≥n pi_video_looper optimizada** (video_looper.ini integrado)
- ‚úÖ **Acceso remoto VPN** (ZeroTier autom√°tico)
- ‚úÖ **Inicio autom√°tico con m√∫ltiples respaldos** (systemd + rc.local + keepalive)
- ‚úÖ **Diagn√≥sticos integrados** (Script de troubleshooting incluido)

---

## üöÄ Caracter√≠sticas principales

### üé¨ **Reproducci√≥n Ultra-Suave**
- **Anti-micro-cortes**: Buffers de audio/video 20x m√°s grandes
- **GPU Memory**: 256MB asignados para aceleraci√≥n de hardware
- **CPU Overclocking**: 1800MHz para m√°ximo rendimiento
- **Transiciones**: Ultra-suaves de 0.05 segundos entre videos
- **Formatos optimizados**: MP4, H.264, MKV recomendados

### üì∫ **Display Force Ultra-Agresivo**
- **HDMI Keepalive**: Servicio que mantiene la se√±al HDMI activa 24/7
- **Config.txt optimizado**: Par√°metros HDMI forzados para m√°xima compatibilidad
- **Resoluci√≥n fija**: 1920x1080 estable sin fluctuaciones
- **Boot display**: Fuerza la se√±al desde el arranque del sistema

### ‚öôÔ∏è **Configuraci√≥n Avanzada**
- **video_looper.ini**: Integrado con par√°metros anti-micro-cortes
- **omxplayer optimizado**: Par√°metros avanzados para reproducci√≥n fluida
- **Directorio personalizable**: Usa `/home/admin/VIDLOOP44` por defecto
- **M√∫ltiples ubicaciones**: Configuraci√≥n distribuida autom√°ticamente

### üîÑ **Inicio Autom√°tico Robusto**
- **Servicio systemd**: `vidloop-definitivo.service` con prioridad m√°xima
- **Respaldo rc.local**: Por si systemd falla
- **HDMI keepalive**: Servicio independiente para mantener display
- **Reinicio autom√°tico**: Si el video falla, se reinicia en 3 segundos

### üåê **Acceso Remoto Profesional**
- **ZeroTier VPN**: Acceso seguro desde cualquier lugar
- **SSH optimizado**: Puerto 44 con configuraci√≥n de seguridad
- **Logs centralizados**: Diagn√≥stico remoto completo
- **Script de diagn√≥stico**: Troubleshooting autom√°tico incluido

---

## üìã Requisitos del sistema

- **Raspberry Pi**: 3B+, 4B, o superior (recomendado: 4B con 4GB RAM)
- **Sistema operativo**: Raspberry Pi OS (32-bit o 64-bit)
- **Tarjeta SD**: M√≠nimo 16GB, recomendado 32GB+ (Clase 10)
- **Alimentaci√≥n**: Fuente oficial de 5V/3A m√≠nimo
- **Conectividad**: Puerto HDMI + Internet para instalaci√≥n inicial

---

## üîß Instalaci√≥n paso a paso

### 1. **Preparar la Raspberry Pi**
```bash
# Actualizar sistema base (opcional, el script lo hace autom√°ticamente)
sudo apt update && sudo apt upgrade -y
```

### 2. **Descargar VIDLOOP DEFINITIVO**
```bash
# Opci√≥n A: Clonar repositorio completo
git clone https://github.com/ignacentenox/VIDLOOP.git
cd VIDLOOP

# Opci√≥n B: Descargar solo el script
curl -O https://raw.githubusercontent.com/ignacentenox/VIDLOOP/main/RASPBERRY-PAGE/vidloop-definitivo.sh
```

### 3. **Ejecutar instalaci√≥n definitiva**
```bash
# Dar permisos de ejecuci√≥n
chmod +x vidloop-definitivo.sh

# Ejecutar instalaci√≥n completa (como sudo)
sudo ./vidloop-definitivo.sh
```

### 4. **Proceso autom√°tico**
El script realiza **autom√°ticamente**:

- ‚úÖ **Detecci√≥n de usuario y sistema**
- ‚úÖ **Actualizaci√≥n completa del sistema**
- ‚úÖ **Instalaci√≥n de todas las dependencias**
- ‚úÖ **Configuraci√≥n de GPU y CPU** (256MB GPU, 1800MHz CPU)
- ‚úÖ **Optimizaci√≥n de config.txt y cmdline.txt**
- ‚úÖ **Instalaci√≥n de pi_video_looper** (desde GitHub)
- ‚úÖ **Configuraci√≥n anti-micro-cortes** (video_looper.ini optimizado)
- ‚úÖ **Setup HDMI force ultra-agresivo**
- ‚úÖ **Instalaci√≥n y configuraci√≥n de ZeroTier VPN**
- ‚úÖ **Creaci√≥n de servicios systemd** (inicio autom√°tico)
- ‚úÖ **Scripts de diagn√≥stico y utilidades**
- ‚úÖ **Configuraci√≥n de SSH seguro** (puerto 22)

### 5. **Reinicio autom√°tico**
```bash
# El script reinicia autom√°ticamente al finalizar
# Si no reinicia autom√°ticamente:
sudo reboot
```

---

## üé¨ Uso del sistema

### **Agregar videos**
1. **Crear/verificar directorio de videos:**
   ```bash
   mkdir -p /home/admin/VIDLOOP44
   ```

2. **Subir videos** (formatos recomendados):
   - ‚úÖ **MP4** (H.264) - **RECOMENDADO**
   - ‚úÖ **H.264** puro - **√ìPTIMO**
   - ‚úÖ **MKV** - **BUENO**
   - ‚ö†Ô∏è AVI, WMV, FLV (pueden causar micro-cortes)

3. **Los videos se reproducen autom√°ticamente** al arrancar la RPi

### **Comandos √∫tiles**
```bash
# Ver estado del servicio
sudo systemctl status vidloop-definitivo.service

# Reiniciar reproducci√≥n
sudo systemctl restart vidloop-definitivo.service

# Ver logs en tiempo real
sudo journalctl -u vidloop-definitivo.service -f

# Ejecutar diagn√≥stico completo
sudo /usr/local/bin/vidloop-definitivo-diagnostic.sh

# Verificar configuraci√≥n
cat /opt/video_looper/video_looper.ini
```

---

## üåê Configuraci√≥n VPN (ZeroTier)

### **Configurar acceso remoto:**
1. **El script instala ZeroTier autom√°ticamente**

2. **Unir a tu red ZeroTier:**
   ```bash
   sudo zerotier-cli join TU_NETWORK_ID
   ```

3. **Autorizar en el panel web:**
   - Ir a [ZeroTier Central](https://my.zerotier.com/)
   - Autorizar la nueva Raspberry Pi
   - Anotar la IP asignada

4. **Acceso SSH remoto:**
   ```bash
   ssh admin@IP_ZEROTIER -p 44
   ```

---

## üîß Configuraci√≥n avanzada

### **Personalizar video_looper.ini**
El archivo se encuentra en: `/opt/video_looper/video_looper.ini`

**Par√°metros clave anti-micro-cortes:**
```ini
# Buffers aumentados 20x
omxplayer_extra_args = --audio_queue 20 --video_queue 20

# Transici√≥n ultra-suave
wait_time = 0.05

# GPU optimizada
gpu_mem = 256

# Resoluci√≥n fija
width = 1920
height = 1080
```

### **Modificar directorio de videos**
```bash
# Editar configuraci√≥n
sudo nano /opt/video_looper/video_looper.ini

# Cambiar ruta:
directory_path = /tu/nueva/ruta

# Reiniciar servicio
sudo systemctl restart vidloop-definitivo.service
```

---

## üõ†Ô∏è Troubleshooting

### **Script de diagn√≥stico autom√°tico**
```bash
# Ejecutar diagn√≥stico completo
sudo /usr/local/bin/vidloop-definitivo-diagnostic.sh
```

### **Problemas comunes y soluciones**

**‚ùå Pantalla negra al arrancar:**
```bash
# Forzar HDMI manualmente
sudo tvservice -p
sudo tvservice --explicit="CEA 16 HDMI"
```

**‚ùå Videos con micro-cortes:**
```bash
# Verificar configuraci√≥n anti-micro-cortes
grep -E "(audio_queue|video_queue)" /opt/video_looper/video_looper.ini

# Debe mostrar: audio_queue 20, video_queue 20
```

**‚ùå Servicio no inicia:**
```bash
# Ver logs de error
sudo journalctl -u vidloop-definitivo.service -n 50

# Reiniciar servicio
sudo systemctl restart vidloop-definitivo.service
```

**‚ùå No encuentra videos:**
```bash
# Verificar directorio y permisos
ls -la /home/admin/VIDLOOP44/
sudo chown -R admin:admin /home/admin/VIDLOOP44/
```

---

## üìä Especificaciones t√©cnicas

### **Optimizaciones de hardware**
- **GPU Memory**: 256MB (√≥ptimo para video HD)
- **CPU Frequency**: 1800MHz (overclock estable)
- **GPU Frequency**: 500MHz (aceleraci√≥n m√°xima)
- **Memory Split**: 256MB para GPU
- **I/O Scheduler**: Deadline (√≥ptimo para video)

### **Configuraci√≥n de software**
- **Video Player**: omxplayer (hardware-accelerated)
- **Audio Buffers**: 20x m√°s grandes (anti-micro-cortes)
- **Video Buffers**: 20x m√°s grandes (reproducci√≥n fluida)
- **Frame Rate**: 25fps fijo (estabilidad)
- **Priority**: Nice -20 (m√°xima prioridad CPU)

### **Servicios del sistema**
- `vidloop-definitivo.service` - Reproductor principal
- `hdmi-keepalive.service` - Mantiene se√±al HDMI
- `zerotier-one.service` - VPN para acceso remoto

---

## üìà Ventajas vs versi√≥n anterior

| Caracter√≠stica | Versi√≥n Anterior | VIDLOOP DEFINITIVO |
|----------------|------------------|-------------------|
| **Instalaci√≥n** | Manual paso a paso | ‚úÖ Autom√°tica completa |
| **Anti-micro-cortes** | No incluido | ‚úÖ Buffers 20x optimizados |
| **Display Force** | B√°sico | ‚úÖ Ultra-agresivo + keepalive |
| **Configuraci√≥n** | Manual | ‚úÖ video_looper.ini integrado |
| **Inicio autom√°tico** | Solo systemd | ‚úÖ Triple respaldo |
| **Diagn√≥sticos** | Manual | ‚úÖ Script autom√°tico incluido |
| **Actualizaci√≥n** | Reinstalaci√≥n completa | ‚úÖ Script √∫nico actualizable |

---

## üí° Casos de uso recomendados

### **üè™ Retail y puntos de venta**
- Promociones y ofertas en loop
- Informaci√≥n de productos
- Se√±alizaci√≥n digital interstore

### **üé™ Ferias y eventos**
- Presentaciones corporativas
- Demos de productos
- Informaci√≥n institucional

### **üì∫ Broadcast y televisi√≥n**
- Separadores de programaci√≥n
- Publicidades en loop
- Contenido de relleno

### **üè¢ Oficinas corporativas**
- Comunicaci√≥n interna
- KPIs y m√©tricas en tiempo real
- Informaci√≥n para visitantes

---

## üîÑ Actualizaciones y mantenimiento

### **Actualizar el sistema**
```bash
# Actualizar VIDLOOP DEFINITIVO
curl -O https://raw.githubusercontent.com/ignacentenox/VIDLOOP/vidloop-definitivo.sh
chmod +x vidloop-definitivo.sh
sudo ./vidloop-definitivo.sh
```

### **Mantenimiento peri√≥dico**
```bash
# Limpiar logs (mensual)
sudo journalctl --vacuum-time=30d

# Verificar salud del sistema
sudo /usr/local/bin/vidloop-definitivo-diagnostic.sh

# Actualizar sistema base (trimestral)
sudo apt update && sudo apt upgrade -y
```

---

## üìû Soporte t√©cnico profesional

### **Desarrollado por:**
**Ignacio Manuel Centeno**  
üîß Desarrollador de Software  
üìß [ignacenteno46@gmail.com](mailto:ignacenteno46@gmail.com)  
üåê Especialista en Raspberry Pi y sistemas embebidos

### **Avalado por:**
**44 Contenidos**  
üé¨ Soluciones audiovisuales y digitales profesionales  
üì∫ Especialistas en broadcast

### **Soporte incluido:**
- ‚úÖ **Instalaci√≥n remota** v√≠a ZeroTier VPN
- ‚úÖ **Configuraci√≥n personalizada** seg√∫n necesidades
- ‚úÖ **Troubleshooting** y resoluci√≥n de problemas
- ‚úÖ **Actualizaciones** y mejoras continuas
- ‚úÖ **Documentaci√≥n t√©cnica** completa

---

## üöÄ ¬øListo para profesionalizar tu comunicaci√≥n visual?

**VIDLOOP DEFINITIVO** es la soluci√≥n m√°s completa y robusta del mercado para Raspberry Pi, dise√±ada para entornos profesionales que requieren:

- ‚ö° **M√°xima estabilidad**
- üéØ **Cero micro-cortes**
- üîß **F√°cil mantenimiento**
- üåê **Acceso remoto seguro**
- üí™ **Soporte t√©cnico profesional**

### **¬°Consultanos para implementaciones a medida!**

**¬øNecesitas m√∫ltiples pantallas? ¬øConfiguraci√≥n corporativa? ¬øIntegraci√≥n con sistemas existentes?**

Contactanos para soluciones enterprise y descuentos por volumen. 

---

*VIDLOOP v1.0 - La evoluci√≥n definitiva de los sistemas de videoloops para Raspberry Pi* üéØ
